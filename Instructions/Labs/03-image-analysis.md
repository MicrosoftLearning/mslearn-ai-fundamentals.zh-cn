---
lab:
  title: 在 Vision Studio 中分析图像
---

# 在 Vision Studio 中分析图像 

**** Azure AI 视觉包括许多功能，用于理解图像内容和上下文以及提取图像中的信息。 使用 Azure AI Vision Studio，可以试用许多图像分析功能。 

在本练习中，你将在 Vision Studio 中使用内置的试用体验来分析图像。 假设虚构零售商 Northwind Traders 已决定实现“智能商店”，其中 AI 服务监视商店以识别需要帮助的客户，并指示员工帮助他们。** 通过使用 Azure AI 视觉，可以分析摄像头在商店中拍摄的图像，针对图像的内容提供有意义的说明。

## 创建 Azure AI 服务资源

你可以将 Azure AI 视觉的图像分析功能与 Azure AI 服务的多服务资源配合使用。**** 在 Azure 订阅中创建一个 Azure AI 服务资源（如果尚未这样做）。

1. 在另一个浏览器标签页中，打开 Azure 门户 ([https://portal.azure.com](https://portal.azure.com?azure-portal=true))，并使用与 Azure 订阅关联的 Microsoft 帐户登录。

1. 单击“&#65291;创建资源”按钮，然后搜索“Azure AI 服务”。 选择创建 Azure AI 服务计划。 随后你会转到一个页面，可在其中创建 Azure AI 服务资源。 使用以下设置对其进行配置：
    - **订阅**：Azure 订阅。
    - **资源组**：选择或创建具有唯一名称的资源组。
    - 区域****：美国东部。
    - **名称**：输入唯一名称。
    - **定价层**：*标准 S0。*
    - “选中此框即表示我确认我已阅读并理解以下所有条款”****：“已选择”**。

1. 依次选择“查看 + 创建”和“创建”，然后等待部署完成********。

## 将 Azure AI 服务资源连接到 Vision Studio

接下来，将上面预配的 Azure AI 服务资源连接到 Vision Studio。

1. 在另一个浏览器标签页中，导航到 Vision Studio。[](https://portal.vision.cognitive.azure.com?azure-portal=true)

1. 使用帐户登录，并确保使用的目录与已创建 Azure AI 服务资源的目录相同。

1. 在 Vision Studio 主页上，选择“视觉入门”标题下的“查看所有资源”********。

    ![“查看所有资源”链接在 Vision Studio 中的“视觉入门”下突出显示。](./media/analyze-images-vision/vision-resources.png)

1. 在“选择要处理的资源”页面上，将鼠标光标悬停在你前面在列表中创建的资源上，并选中资源名称左侧的框，然后选择“选择作为默认资源”。********

    > **注意**：如果未列出你的资源，可能需要刷新**** 页面。

    ![系统会显示“选择要处理的资源”对话，并在其中突出显示并选中 cog-ms-learn-vision-SUFFIX 认知服务资源。 此时会突出显示“选择作为默认资源”按钮。](./media/analyze-images-vision/default-resource.png)

1. 通过选择屏幕右上角的“x”关闭设置页面。

## 为图像生成描述文字

现在，你已准备好使用 Vision Studio 分析 Northwind Traders 商店中的摄像头拍摄的图像。**

让我们看看 Azure AI 视觉服务的图像描述文字功能。 图像描述文字可通过“描述文字”和“密集描述文字”功能实现********。

1. 在 Web 浏览器中，导航到 Vision Studio[](https://portal.vision.cognitive.azure.com?azure-portal=true)。

1. 在“视觉入门”登陆页上，选择“图像分析”选项卡，然后选择“向图像添加描述文字”磁贴。************

    ![在 Vision Studio 主页上，选中并突出显示了“图像分析”选项卡。 突出显示了“向图像添加描述文字”磁贴。](./media/analyze-images-vision/add-captions.png)

1. 在“试用”子标题下，通过阅读并选中对应的框来确认资源使用策略。****  

1. 选择 [https://aka.ms/mslearn-images-for-analysis****](https://aka.ms/mslearn-images-for-analysis) 以下载 image-analysis.zip。**** 打开计算机上的相应文件夹，找到名为“store-camera-1.jpg”的文件，其中包含下图：****

    ![一位家长使用手机相机在店里给孩子拍照的图像](./media/analyze-images-vision/store-camera-1.jpg)

1. 上传 store-camera-1.jpg 图像，方法是将其拖动到“将文件拖放到此处”框，或者在文件系统上浏览到该文件。********

1. 观察生成的描述文字，该文字显示在图像右侧的“检测到的属性”面板中。****

    “描述文字”**** 功能将提供一句人类可读懂的英语句子来描述图像内容。

1. 接下来，使用相同的图像执行密集描述文字操作。**** 返回到 Vision Studio 主页，就像之前所做的那样，选择“图像分析”选项卡，然后选择“密集描述文字”磁贴************。

    ********“密集描述文字”功能不同于“描述文字”功能，因为前者会为图像提供多句人类可读懂的描述文字，其中一句描述图像的内容，其他各句则介绍图片中检测到的基本对象。 每个检测到的对象都包含一个范围框，该框定义图像中与对象关联的像素坐标。

1. 将鼠标悬停在“检测到的属性”列表中的某句描述文字上，并观察图像中发生的情况。****

    ![此时将显示图像及其描述文字。](./media/analyze-images-vision/dense-captioning.png)

    将鼠标光标移到列表中的其他描述文字上，并注意范围框在图像中的移动方式，以突出显示用于生成描述文字的图像部分。

## 标记图像

你将尝试的下一个功能是“提取标记”**** 功能。 基于数千个可识别的对象（包括生物、风景和操作）提取标记。

1. 返回到 Vision Studio 的主页，然后在“图像分析”选项卡下选择“提取图像中的常用标记”磁贴********。

2. 在“选择要试用的模型”中，将“预生成产品与间隙模型”保持选中状态。******** 在“选择语言”中，选择“英语”******** 或偏好的语言。

3. 打开包含下载的图像的文件夹，找到名为“store-image-2.jpg”的文件，如下所示：****

    ![超市中拿着购物篮的人的图像](./media/analyze-images-vision/store-camera-2.jpg)

4. 上传 store-camera-2.jpg 文件。****

5. 在“检测到的属性”面板中，查看从图像中提取的标签列表以及每个标签的置信度分数。 此处的置信度分数代表的是检测到的属性的文本描述图像中实际内容的可能性。 请注意，在标记列表中，它不仅包括对象，还包括购物、销售和站立等操作******。

    ![Vision Studio 中“检测到的属性”面板的屏幕截图，其中在原始图像旁边显示了文本和置信度分数。](./media/analyze-images-vision/detect-attributes.png)

## 对象检测

在此任务中，将使用图像分析的对象检测**** 功能。 对象检测将基于成千上万的可识别对象和生物检测和提取范围框。

1. 返回到 Vision Studio 的主页，然后在“图像分析”选项卡下选择“检测图像中的常用标记”磁贴********。

1. 在“选择要试用的模型”中，将“预生成产品与间隙模型”保持选中状态。********

1. 打开包含下载的图像的文件夹，找到名为“store-camera-3.jpg”的文件，如下所示：****

    ![推着购物车的人员的图像](./media/analyze-images-vision/store-camera-3.jpg)

1. 上传 store-camera-3.jpg 文件。****

1. 在“检测到的属性”框中，观察检测到的对象列表以及每个对象的置信度分数。****

1. 将鼠标光标悬停在“检测到的属性”列表中的对象上，以突出显示图像中对象的范围框。****

1. 移动“阈值”**** 滑块，直到滑块右侧显示值 70。 观察列表中的对象会发生什么情况。 该阈值滑块将指定仅应显示置信度分数或概率大于阈值的对象。

## 清理

如果不打算做更多的练习，请删除任何不再需要的资源。 这可以避免产生任何不必要的成本。

1.  打开 [Azure 门户]( https://portal.azure.com)，然后选择包含你所创建的资源的资源组。 
1.  选择该资源并选择“删除”，然后选择“是”以******** 进行确认。 这样便会删除该资源。

## 了解详细信息

若要详细了解此服务的用途，请参阅 [Azure AI 视觉服务页面](https://learn.microsoft.com/azure/ai-services/computer-vision/overview)。
