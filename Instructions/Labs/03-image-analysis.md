---
lab:
  title: 在 Azure AI Foundry 门户中分析图像
---

# 在 Azure AI Foundry 门户中分析图像

**** Azure AI 视觉包括许多功能，用于理解图像内容和上下文以及提取图像中的信息。 在本练习中，你将使用 Azure AI Foundry 门户（Microsoft 创建智能应用程序的平台）中的 Azure AI 视觉，以使用内置的试用体验分析图像。 

假设虚构零售商 Northwind Traders 已决定实现“智能商店”，其中 AI 服务监视商店以识别需要帮助的客户，并指示员工帮助他们。** 通过使用 Azure AI 视觉，可以分析摄像头在商店中拍摄的图像，针对图像的内容提供有意义的说明。

## 在 Azure AI Foundry 门户中创建项目

1. 在 Web 浏览器中打开 [Azure AI Foundry 门户](https://ai.azure.com)，网址为：`https://ai.azure.com`，然后使用 Azure 凭据登录。 关闭首次登录时弹出的所有提示或快速入门窗格。 

1. 在浏览器中，导航到 `https://ai.azure.com/managementCenter/allResources` 并选择“**创建**”。 然后选择创建新的 *AI 中心资源*的选项。

1. 在*创建项目*向导中，输入项目的有效名称，如果建议使用现有中心，请选择“*新建*“。 

1. 展开“*高级选项*”，为项目指定以下设置：
    - 订阅：Azure 订阅
    - **资源组**：创建或选择资源组
    - **区域**：请选择以下位置之一：
        * 美国东部
        * 法国中部
        * 韩国中部
        * 西欧
        * 美国西部

    等待创建项目和中心。

1. 创建项目后，你将访问项目详细信息的“*概述*”页。 在左侧菜单中选择“**AI 服务**”（可能需要单击顶部图标展开菜单，才能看到具体内容）。 

1. 在“*AI 服务*”页上，选择“*视觉 + 文档*”磁贴以试用 Azure AI 视觉和文档功能。

    ![Azure AI Foundry 中“视觉 + 文档”磁贴的屏幕截图。](./media/vision-document-tile.png)

## 为图像生成描述文字

让我们使用 Azure AI 视觉的图像字幕功能来分析 *Northwind Traders* 商店的相机拍摄的图像。 图像描述文字可通过“描述文字”和“密集描述文字”功能实现********。

1. 在“*视觉 + 文档*”页上，向下滚动并选择“*查看所有其他视觉功能*”下的“**图像**”。 然后选择“**图像字幕**”磁贴。

    ![视觉和文档页面图像部分中的图像字幕磁贴的屏幕截图。](./media/vision-image-captioning-tile.png)

1. 在“**向图像添加辅助字幕**”页上，选择你创建的“*Azure AI 服务*。 

1. 在“**向图像添加标题**”页上，查看连接到的资源，该资源在“**试用**”副标题下列出。 无需进行更改。 （*备注*：如果在创建资源期间未提前自定义有效的资源位置，系统可能会要求创建位于有效区域中的新 Azure AI 服务资源。 需要创建新资源才能继续实验室。）  

1. 选择 [https://aka.ms/mslearn-images-for-analysis****](https://aka.ms/mslearn-images-for-analysis) 以下载 image-analysis.zip。**** 打开计算机上的相应文件夹，找到名为“store-camera-1.jpg”的文件，其中包含下图：****

    ![一位家长使用手机相机在店里给孩子拍照的图像](./media/analyze-images-vision/store-camera-1.jpg)

1. 上传 store-camera-1.jpg 图像，方法是将其拖动到“将文件拖放到此处”框，或者在文件系统上浏览到该文件。********

1. 观察生成的描述文字，该文字显示在图像右侧的“检测到的属性”面板中。****

    “描述文字”**** 功能将提供一句人类可读懂的英语句子来描述图像内容。

1. 接下来，使用相同的图像执行密集描述文字操作。**** 通过选择页面顶部的*后退*箭头返回到”**视觉 + 文档**“页。 在“*视觉 + 文档*”页上，选择“**图像**”选项卡，然后选择“**密集字幕**”磁贴。

    ********“密集描述文字”功能不同于“描述文字”功能，因为前者会为图像提供多句人类可读懂的描述文字，其中一句描述图像的内容，其他各句则介绍图片中检测到的基本对象。 每个检测到的对象都包含一个范围框，该框定义图像中与对象关联的像素坐标。

1. 将鼠标悬停在“检测到的属性”列表中的某句描述文字上，并观察图像中发生的情况。****

    ![此时将显示图像及其描述文字。](./media/analyze-images-vision/dense-captioning.png)

    将鼠标光标移到列表中的其他描述文字上，并注意范围框在图像中的移动方式，以突出显示用于生成描述文字的图像部分。

## 标记图像 

你将尝试的下一个功能是“提取标记”** 功能。 基于数千个可识别的对象（包括生物、风景和操作）提取标记。

1. 返回到 Azure AI Foundry 的“*视觉 + 文档*”页，然后选择“**图像**”选项卡，再选择“**通用标记提取**”磁贴。

1. 打开包含下载的图像的文件夹，找到名为“store-image-2.jpg”的文件，如下所示：****

    ![超市中拿着购物篮的人的图像](./media/analyze-images-vision/store-camera-2.jpg)

1. 上传 store-camera-2.jpg 文件。****

1. 在“检测到的属性”面板中，查看从图像中提取的标签列表以及每个标签的置信度分数。 此处的置信度分数代表的是检测到的属性的文本描述图像中实际内容的可能性。 请注意，在标记列表中，它不仅包括对象，还包括购物、销售和站立等操作******。

    ![Vision Studio 中“检测到的属性”面板的屏幕截图，其中在原始图像旁边显示了文本和置信度分数。](./media/analyze-images-vision/detect-attributes.png)

## 对象检测

在此任务中，将使用图像分析的对象检测**** 功能。 对象检测将基于成千上万的可识别对象和生物检测和提取范围框。

1. 返回到 Azure AI Foundry 的“*视觉 + 文档*”页，然后选择“**图像**”选项卡，再选择“**常见对象检测**”磁贴。

1. 打开包含下载的图像的文件夹，找到名为“store-camera-3.jpg”的文件，如下所示：****

    ![推着购物车的人员的图像](./media/analyze-images-vision/store-camera-3.jpg)

1. 上传 store-camera-3.jpg 文件。****

1. 在“检测到的属性”框中，观察检测到的对象列表以及每个对象的置信度分数。****

1. 将鼠标光标悬停在“检测到的属性”列表中的对象上，以突出显示图像中对象的范围框。****

1. 移动“阈值”**** 滑块，直到滑块右侧显示值 70。 观察列表中的对象会发生什么情况。 该阈值滑块将指定仅应显示置信度分数或概率大于阈值的对象。

## 清理

如果不打算做更多的练习，请删除任何不再需要的资源。 这可以避免产生任何不必要的成本。

1.  打开 [Azure 门户]( https://portal.azure.com)，然后选择包含你所创建的资源的资源组。 
1.  选择该资源并选择“删除”，然后选择“是”以******** 进行确认。 这样便会删除该资源。

## 了解详细信息

若要详细了解此服务的用途，请参阅 [Azure AI 视觉服务页面](https://learn.microsoft.com/azure/ai-services/computer-vision/overview)。
