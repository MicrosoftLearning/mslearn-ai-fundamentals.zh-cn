---
lab:
  title: 在 Azure AI Foundry 门户中分析图像
---

# 在 Azure AI Foundry 门户中分析图像

**** Azure AI 视觉包括许多功能，用于理解图像内容和上下文以及提取图像中的信息。 在本练习中，你将使用 Azure AI Foundry 门户（Microsoft 创建智能应用程序的平台）中的 Azure AI 视觉，以使用内置的试用体验分析图像。 

假设虚构零售商 Northwind Traders 已决定实现“智能商店”，其中 AI 服务监视商店以识别需要帮助的客户，并指示员工帮助他们。** 通过使用 Azure AI 视觉，可以分析摄像头在商店中拍摄的图像，针对图像的内容提供有意义的说明。

此练习大约需要 **20** 分钟。

## 下载并提取图像文件

1. 从 `https://aka.ms/mslearn-images-for-analysis` 中下载 [image-analysis.zip](https://aka.ms/mslearn-images-for-analysis)****。
1. 将已下载的 .zip 文件提取到计算机上的文件夹中。

## 在 Azure AI Foundry 门户中创建项目

1. 在 Web 浏览器中打开 [Azure AI Foundry 门户](https://ai.azure.com)，网址为：`https://ai.azure.com`，然后使用 Azure 凭据登录。 关闭首次登录时打开的任何使用技巧或快速入门窗格，如有必要，使用左上角的 **Azure AI Foundry** 徽标导航到主页，类似下图所示（若已打开**帮助**面板，请关闭）：

    ![Azure AI Foundry 门户主页的屏幕截图。](./media/ai-foundry-portal.png)

1. 滚动到页面底部，然后选择“浏览 Azure AI 服务”磁贴。****

    ![“浏览 Azure AI 服务”磁贴的屏幕截图。](./media/ai-services.png)

1. 在“Azure AI 服务”页中，选择“视觉 + 文档”磁贴。****

    ![“视觉 + 文档”磁贴的屏幕截图。](./media/vision-tile.png)

1. 在“视觉 + 文档”页上，选择“图像”选项卡，然后选择“图像标注”磁贴。************

    ![“图像标注”磁贴的屏幕截图。](./media/image-captioning-tile.png)

1. 在“向图像添加描述文字”窗格中，使用“选择中心”按钮使用以下设置“创建新中心”：************
    - 中心名称****：输入有效的中心名称。**
    - **订阅**：Azure 订阅
    - **资源组**：*创建或选择资源组*
    - 位置****：选择以下位置之一/*：**
        - 美国东部
        - 法国中部
        - 韩国中部
        - 西欧
        - 美国西部
    - 连接 Azure AI 服务：**** 使用有效名称创建新的 Azure AI 服务资源**
    - **连接 Azure AI 搜索**：跳过连接

    *撰写本文时，这些区域中的中心支持 Azure AI 视觉。\**

1. 创建中心后，系统会提示你创建项目。 输入合适的项目名称，并选择“创建项目”****。

## 为图像生成描述文字

让我们使用 Azure AI 视觉的图像字幕功能来分析 *Northwind Traders* 商店的相机拍摄的图像。 图像描述文字可通过“描述文字”和“密集描述文字”功能实现********。

1. 在左侧任务窗格中，选择“AI 服务”****。

    现在，需要重复之前使用的步骤，返回到图像标注界面，并使用基于中心的新项目。**

1. 在“AI 服务”页中，选择“视觉 + 文档”磁贴。******** 然后，在“视觉 + 文档”页上的“图像”选项卡上，选择“图像标注”磁贴。************

1. 在“向图像添加描述文字”页的“连接的 Azure AI 服务”选择菜单下，确保已选中你在中心中创建的 Azure AI 服务资源。******

1. 使用“浏览文件”链接，从之前下载和提取的文件上传 store-camera-1.jpg 图像。********

1. 观察生成的描述文字，该文字显示在图像右侧的“检测到的属性”面板中。****

    ![“向图像添加描述文字”页的屏幕截图，其中包含已分析的图像。](./media/image-captioning.png)

    “描述文字”**** 功能将提供一句人类可读懂的英语句子来描述图像内容。

1. 接下来，使用相同的图像执行密集描述文字操作。**** 选择页面顶部的 &larr; 后退箭头，返回到“视觉 + 文档”页，然后在“视觉 + 文档”页的“图像”选项卡上，选择“密集标注”磁贴。**********************

    ********“密集描述文字”功能不同于“描述文字”功能，因为前者会为图像提供多句人类可读懂的描述文字，其中一句描述图像的内容，其他各句则介绍图片中检测到的基本对象。 每个检测到的对象都包含一个范围框，该框定义图像中与对象关联的像素坐标。

1. 再次上传 store-camera-1.jpg 图像，并查看密集标注结果。****

    ![密集标注结果的屏幕截图。](./media/dense-captioning.png)

    将鼠标悬停在“检测到的属性”列表中的任一描述文字上，可以观察到为图像中检测到的每个对象生成描述文字。****

## 标记图像 

你将尝试的下一个功能是“提取标记”** 功能。 基于数千个可识别的对象（包括生物、风景和操作）提取标记。

1. 选择页面顶部的 &larr; 后退箭头返回到“视觉 + 文档”页。********** 然后，在“视觉 + 文档”页上，在“图像”选项卡上，选择“通用标记提取”磁贴。************
1. 从之前提取的文件夹上传 store-camera-2.jpg 文件。****
1. 在“检测到的属性”面板中，查看从图像中提取的标签列表以及每个标签的置信度分数。 此处的置信度分数代表的是检测到的属性的文本描述图像中实际内容的可能性。 请注意，在标记列表中，它不仅包括对象，还包括购物、销售和站立等操作******。

    ![Vision Studio 中“检测到的属性”面板的屏幕截图，其中在原始图像旁边显示了文本和置信度分数。](./media/analyze-images-vision/detect-attributes.png)

## 对象检测

在此任务中，将使用图像分析的对象检测**** 功能。 对象检测将基于成千上万的可识别对象和生物检测和提取范围框。

1. 选择页面顶部的 &larr; 后退箭头返回到“视觉 + 文档”页。********** 然后在“图像”选项卡上，选择“通用对象检测”磁贴。********

1. 上传 store-camera-3.jpg 文件。****

1. 在“检测到的属性”框中，观察检测到的对象列表以及每个对象的置信度分数。****

    ![密集标注结果的屏幕截图。](./media/object-detection.png)

1. 尝试检测 store-camera-4.jpg 中的对象****

## 清理

如果不打算做更多的练习，请删除任何不再需要的资源。 这可以避免产生任何不必要的成本。

1. 打开 [Azure 门户]( https://portal.azure.com)，然后选择包含你所创建的资源的资源组。 
1. 选择“删除资源组”，然后输入资源组名称进行确认********。 这样便会删除该资源组。

## 了解详细信息

若要详细了解此服务的用途，请参阅 [Azure AI 视觉服务页面](https://learn.microsoft.com/azure/ai-services/computer-vision/overview)。
